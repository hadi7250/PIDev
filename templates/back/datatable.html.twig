<!doctype html>
<html lang="en" data-bs-theme="blue-theme">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Quiz List | EduConnect Admin</title>
  
  <link rel="icon" href="{{ asset('back/images/favicon-32x32.png') }}" type="image/png">
  <link href="{{ asset('back/plugins/perfect-scrollbar/css/perfect-scrollbar.css') }}" rel="stylesheet">
  <link href="{{ asset('back/plugins/metismenu/metisMenu.min.css') }}" rel="stylesheet">
  <link href="{{ asset('back/plugins/simplebar/css/simplebar.css') }}" rel="stylesheet">
  <link href="{{ asset('back/plugins/datatable/css/dataTables.bootstrap5.min.css') }}" rel="stylesheet" />
  <link href="{{ asset('back/css/bootstrap.min.css') }}" rel="stylesheet">
  <link href="{{ asset('back/css/bootstrap-extended.css') }}" rel="stylesheet">
  <link href="{{ asset('back/sass/main.css') }}" rel="stylesheet">
  <link href="{{ asset('back/sass/dark-theme.css') }}" rel="stylesheet">
  <link href="{{ asset('back/sass/blue-theme.css') }}" rel="stylesheet">
  <link href="{{ asset('back/sass/semi-dark.css') }}" rel="stylesheet">
  <link href="{{ asset('back/sass/bordered-theme.css') }}" rel="stylesheet">
  <link href="{{ asset('back/sass/responsive.css') }}" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Material+Icons+Outlined" rel="stylesheet">
</head>

<body>

<header class="top-header">
  <nav class="navbar navbar-expand align-items-center gap-4">
    <div class="btn-toggle">
      <a href="javascript:;"><i class="material-icons-outlined">menu</i></a>
    </div>
    <div class="search-bar flex-grow-1">
      <div class="position-relative">
        <input class="form-control rounded-5 px-5 search-control d-lg-block d-none" type="text" placeholder="Search">
      </div>
    </div>
  </nav>
</header>
<aside class="sidebar-wrapper" data-simplebar="true">
  <div class="sidebar-header">
    <div class="logo-icon">
      <img src="{{ asset('back/images/logo-icon.png') }}" class="logo-img" alt="">
    </div>
    <div class="logo-name flex-grow-1">
      <h5 class="mb-0">EduConnect</h5>
    </div>
    <div class="sidebar-close">
      <span class="material-icons-outlined">close</span>
    </div>
  </div>
  <div class="sidebar-nav">
      <ul class="metismenu" id="sidenav">
        <li>
          <a href="{{ path('app_admin_quiz_index') }}">
            <div class="parent-icon"><i class="material-icons-outlined">home</i></div>
            <div class="menu-title">Dashboard</div>
          </a>
        </li>
        <li class="menu-label">Management</li>
        <li>
          <a href="javascript:;" class="has-arrow">
            <div class="parent-icon"><i class="material-icons-outlined">shopping_bag</i></div>
            <div class="menu-title">Service Management</div>
          </a>
          <ul>
            <li><a href="{{ path('app_admin_quiz_datatable') }}"><i class="material-icons-outlined">arrow_right</i>Quizzes</a></li>
            <li><a href="#"><i class="material-icons-outlined">arrow_right</i>Courses</a></li>
          </ul>      
        </li>
      </ul>
  </div>
</aside>
<main class="main-wrapper">
  <div class="main-content">
    
    <div class="page-breadcrumb d-none d-sm-flex align-items-center mb-3">
      <div class="breadcrumb-title pe-3">Tables</div>
      <div class="ps-3">
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb mb-0 p-0">
            <li class="breadcrumb-item"><a href="javascript:;"><i class="bx bx-home-alt"></i></a></li>
            <li class="breadcrumb-item active" aria-current="page">Quiz Data Table</li>
          </ol>
        </nav>
      </div>
      <div class="ms-auto">
        <div class="btn-group">
          <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addQuizModal">
            Add New Quiz
          </button>
        </div>
      </div>
    </div>
    <div class="card">
      <div class="card-body">
        <div class="table-responsive">
          <table id="example" class="table table-striped table-bordered" style="width:100%">
            <thead>
              <tr>
                <th>ID</th>
                <th>Title</th>
                <th>Description</th>
                <th>Time Limit</th>
                <th>Total Score</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              {% for quiz in quizzes %}
              <tr>
                <td>{{ quiz.id }}</td>
                <td>
                    <div class="d-flex align-items-center gap-3">
                        <div class="product-box border">
                            <img src="{{ asset('back/images/products/01.png') }}" alt="">
                        </div>
                        <div class="product-info">
                            <h6 class="product-name mb-1">{{ quiz.title }}</h6>
                        </div>
                    </div>
                </td>
                <td>{{ quiz.description|slice(0, 50) }}...</td>
                <td>{{ quiz.timeLimit }} mins</td>
                <td>{{ quiz.totalScore }}</td>
                <td>
                  <div class="d-flex align-items-center gap-3 fs-6">
                    
                    <a href="{{ path('app_admin_question_index', {'id': quiz.id}) }}" class="text-info" data-bs-toggle="tooltip" title="Manage Questions">
                        <i class="material-icons-outlined">format_list_bulleted</i>
                    </a>

                    <a href="{{ path('app_admin_quiz_edit', {'id': quiz.id}) }}" class="text-warning" data-bs-toggle="tooltip" title="Edit">
                        <i class="material-icons-outlined">edit</i>
                    </a>
                    
                    <form method="post" action="{{ path('app_admin_quiz_delete', {'id': quiz.id}) }}" onsubmit="return confirm('Are you sure?');" style="display:inline;">
                        <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ quiz.id) }}">
                        <button type="submit" class="text-danger border-0 bg-transparent" data-bs-toggle="tooltip" title="Delete">
                            <i class="material-icons-outlined">delete</i>
                        </button>
                    </form>
                  </div>
                </td>
              </tr>
              {% else %}
              <tr>
                  <td colspan="6" class="text-center">No Quizzes Found</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>

  </div>
</main>
<div class="modal fade" id="addQuizModal" tabindex="-1" aria-labelledby="addQuizModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="addQuizModalLabel">Create New Quiz</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
         {{ form_start(form) }}
            
            <div class="mb-3">
                <label class="form-label">Title</label>
                {{ form_widget(form.title, {'attr': {'class': 'form-control', 'placeholder': 'Enter quiz title'}}) }}
                <div class="text-danger">{{ form_errors(form.title) }}</div>
            </div>

            <div class="mb-3">
                <label class="form-label">Description</label>
                {{ form_widget(form.description, {'attr': {'class': 'form-control', 'rows': '3', 'placeholder': 'Enter description'}}) }}
                <div class="text-danger">{{ form_errors(form.description) }}</div>
            </div>

            <div class="mb-3">
                <label class="form-label">Time Limit (mins)</label>
                {{ form_widget(form.timeLimit, {'attr': {'class': 'form-control', 'placeholder': 'e.g., 30'}}) }}
                <div class="text-danger">{{ form_errors(form.timeLimit) }}</div>
            </div>

            <div class="mb-3">
                <label class="form-label">Total Score</label>
                {{ form_widget(form.totalScore, {'attr': {'class': 'form-control', 'placeholder': 'e.g., 100'}}) }}
                <div class="text-danger">{{ form_errors(form.totalScore) }}</div>
            </div>

            <div class="d-grid gap-2">
                <button type="submit" class="btn btn-primary">Save Quiz</button>
            </div>
         {{ form_end(form) }}
         </div>
    </div>
  </div>
</div>
<script src="{{ asset('back/js/bootstrap.bundle.min.js') }}"></script>
<script src="{{ asset('back/js/jquery.min.js') }}"></script>
<script src="{{ asset('back/plugins/perfect-scrollbar/js/perfect-scrollbar.js') }}"></script>
<script src="{{ asset('back/plugins/metismenu/metisMenu.min.js') }}"></script>
<script src="{{ asset('back/plugins/simplebar/js/simplebar.min.js') }}"></script>
<script src="{{ asset('back/plugins/datatable/js/jquery.dataTables.min.js') }}"></script>
<script src="{{ asset('back/plugins/datatable/js/dataTables.bootstrap5.min.js') }}"></script>
<script>
    $(document).ready(function() {
        $('#example').DataTable();
    });
</script>
<script src="{{ asset('back/js/main.js') }}"></script>

</body>
</html>